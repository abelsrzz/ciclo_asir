---
import Layout from "../../layouts/Layout.astro";
import PageHeader from "../../components/PageHeader.astro"
import PageFooter from "../../components/PageFooter.astro"
import { COURSES } from "../../consts/courses";
import { SUBJECTS } from "../../consts/subjects";


export function getStaticPaths() {
  return COURSES.map(({ id }) => {
    return { params: { id } }
  });
}


const { id } = Astro.params

const [course] = COURSES.filter((course) => course.id === id)

let subjectsData = new Array();

course.subjectIds.forEach((subjectData) =>{
    const [subject] = SUBJECTS.filter((subject) => subject.id === subjectData)
    const { id, name, courseId, courseName } = subject;
    const subjectObj = {
        id,
        name,
        courseId,
        courseName
    };
    subjectsData.push(subjectObj);
}) 

---

<Layout title={`${course.name}`}>
  <PageHeader />

  <div class="files-page-wrapper">
    <h1 class="files-title">
      Todo el contenido de {course.name}
    </h1>
    <h2 id="content">
      {
        subjectsData.map(({ id, name }) => (
            <a target="_blank" class="file-link" href={id}>{name}</a>
        ))
    }
    </h2>
  </div>
  <div class="files-wrapper">

  </div>
</Layout>

<PageFooter />

<style is:global>
  .files-page-wrapper,
  .files-wrapper {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .files-wrapper {
    gap: 15px;
  }
  .files-title {
    font-weight: 100;
    margin-bottom: 50px;
  }
  .green-text-title {
    color: var(--accent-color);
  }
  .file-link {
    transition:
      scale 0.1s ease-in-out,
      color 0.1s ease-in-out;
  }
  .file-link:hover {
    cursor: pointer;
    scale: 110%;
    color: var(--accent-color);
  }

  .file-link::before {
    content: "";
    position: absolute;
    display: block;
    width: 100%;
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: var(--accent-color);
    transform: scaleX(0);
    transform-origin: top left;
    transition: transform 0.15s ease-in-out;
  }

  .file-link:hover::before {
    transform: scaleX(1);
  }
</style>
